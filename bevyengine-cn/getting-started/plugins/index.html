   
  

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="Bevy - 插件" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://llever.com/bevyengine-cn&#x2F;getting-started&#x2F;plugins&#x2F;" />
    <meta
      property="og:image"
      content="http://llever.com/bevyengine-cn/assets/bevy_logo_fill.png"
    />
    <meta
      property="og:description"
      content="Bevy is a refreshingly simple data-driven game engine built in Rust. It is free and open-source forever!"
    />
    <link
      rel="shortcut icon"
      type="image/png"
      href="&#x2F;bevyengine-cn/assets/favicon.png"
    />
    <link rel="stylesheet" href="&#x2F;bevyengine-cn/site.css" />
    <link
      href="&#x2F;bevyengine-cn/atom.xml"
      rel="alternate"
      type="application/atom+xml"
    />
    <title>Bevy - 插件</title>
    
<script src="&#x2F;bevyengine-cn/optional-helpers.js"></script>

  </head>

  <body>
    <div class="headerbar-container">
      <nav class="headerbar container">
        <a href="&#x2F;bevyengine-cn/" class="header-logo">
          <img
            src="&#x2F;bevyengine-cn/assets/bevy_logo_dark.svg"
            class="logo"
            alt="bevy logo"
          />
        </a>
        
        <a href="&#x2F;bevyengine-cn/" class="header-logo-mobile">
          <img
            src="&#x2F;bevyengine-cn/assets/bevy_icon_dark.svg"
            class="logo"
            alt="bevy icon"
          />
        </a>
        
        <div class="header-item header-message">
           Features 
        </div>
        <div class="header-item header-push"></div>
        



    


<a href="{{config.base_url}}&#x2f;" class="header-item" >
    Features
</a>

        



    


<a href="&#x2f;learn" class="header-item" >
    Learn
</a>

        



    


<a href="&#x2f;news" class="header-item" >
    News
</a>

        



    


<a href="&#x2f;community" class="header-item" >
    Community
</a>

        <a
          class="header-item header-button header-button-donate"
          href="https://github.com/sponsors/cart"
          >Donate
          <img
            src="&#x2F;bevyengine-cn/assets/heart.svg"
            class="header-button-donate-heart"
            alt="heart icon"
        /></a>
        <a
          class="header-item header-button"
          href="&#x2F;bevyengine-cn/learn/book_cn/getting-started/"
          >Get Started</a
        >
      </nav>
    </div>
    <section class="section">
      <div class="container">
<div class="book-page">
  <input type="checkbox" style="display: none" id="show-book-nav" />
  <nav class="book-nav" role="navigation">
     
    <ul class="book-nav-sections-container book-nav-sections">
       

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;introduction&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">1.</strong>
        简介
    </a>
    
</li>
  

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;getting-started&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">2.</strong>
        入门指南
    </a>
    
    <ul class="book-nav-sections book-nav-sections-indented">
        
        
        

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;getting-started&#x2F;setup&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">2.1.</strong>
        设置
    </a>
    
</li>

        
        
        

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;getting-started&#x2F;apps&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">2.2.</strong>
        apps
    </a>
    
</li>

        
        
        

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;getting-started&#x2F;ecs&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">2.3.</strong>
        ecs
    </a>
    
</li>

        
        
        

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;getting-started&#x2F;plugins&#x2F;" class="book-nav-section-title-active book-nav-section-title" >
        <strong class="book-nav-section-number">2.4.</strong>
        插件
    </a>
    
</li>

        
        
        

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;getting-started&#x2F;resources&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">2.5.</strong>
        资源
    </a>
    
</li>

        
    </ul>
    
</li>
  

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;next-steps&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">3.</strong>
        下一步
    </a>
    
</li>
  

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;contributing&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">4.</strong>
        贡献
    </a>
    
    <ul class="book-nav-sections book-nav-sections-indented">
        
        
        

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;contributing&#x2F;code&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">4.1.</strong>
        code
    </a>
    
</li>

        
        
        

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;contributing&#x2F;docs&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">4.2.</strong>
        docs
    </a>
    
</li>

        
    </ul>
    
</li>
  

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;troubleshooting&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">5.</strong>
        troubleshooting
    </a>
    
</li>
  

<li class="book-nav-section">
    <a href="&#x2F;bevyengine-cn&#x2F;faq&#x2F;" class="book-nav-section-title">
        <strong class="book-nav-section-number">6.</strong>
        faq
    </a>
    
</li>
 
    </ul>
    
  </nav>
  <div class="book-content">
                                                                                           
    <a
      id="book-pager-bar-previous"
      href="&#x2F;bevyengine-cn&#x2F;getting-started&#x2F;ecs&#x2F;"
      class="book-pager-bar book-pager-bar-previous"
    >
      <div class="book-pager-bar-icon book-pager-bar-icon-previous">
        <img
          src="&#x2F;bevyengine-cn/assets/pager_previous.svg"
          class="book-pager-image book-pager-image-left"
        />
      </div>
    </a>
         
    <a
      id="book-pager-bar-next"
      href="&#x2F;bevyengine-cn&#x2F;getting-started&#x2F;resources&#x2F;"
      class="book-pager-bar book-pager-bar-next"
    >
      <div class="book-pager-bar-icon book-pager-bar-icon-next">
        <img
          src="&#x2F;bevyengine-cn/assets/pager_next.svg"
          class="book-pager-image book-pager-image-right"
        />
      </div>
    </a>
    

    <h1>
       插件  
    </h1>
    <div class="media-content"><p>Bevy 的核心原则之一就是模块化. 所以 Bevy 引擎的功能都是以插件实现的. 这包括像渲染器这样的内置功能, 但游戏本身也是作为插件来实现的! 这使得开发人员能够选择他们想要的功能. 不需要 UI? 不要注册 UI 插件(
<a href="https:&#x2F;&#x2F;docs.rs/bevy_ui&#x2F;latest&#x2F;bevy_ui/struct.UiPlugin.html"><code>UiPlugin</code>
</a>). 想要一个无头服务(headless server)? 不要注册渲染插件
<a href="https:&#x2F;&#x2F;docs.rs/bevy_render&#x2F;latest&#x2F;bevy_render/struct.RenderPlugin.html"><code>RenderPlugin</code>
</a>.</p>
<p>这也意味着您可以自由替换任何您不喜欢的组件。如果您觉得有必要, 欢迎您构建自己的
<a href="https:&#x2F;&#x2F;docs.rs/bevy_ui&#x2F;latest&#x2F;bevy_ui/struct.UiPlugin.html"><code>UiPlugin</code>
</a>, 但是如果您认为它有用的话, 可以考虑将它<a href="/contributing">贡献给 Bevy</a>!</p>
<p>然而, 大部分开发者不需要自定义体验, 而只是想要没有麻烦的<code>全引擎</code>体验. 为此, Bevy 提供了一组<code>默认插件</code>.</p>
<h2 id="bevy-de-mo-ren-cha-jian">Bevy 的默认插件</h2>
<p>通过添加<code>默认的Bevy插件</code>, 让我们的应用更加有趣.<br />
通过<code>add_plugins(DefaultPlugins)</code>添加了大多数人希望从引擎获得的特性, 比如 2D / 3D 渲染器, 资源加载, UI 系统, 窗口和输入.</p>
<pre style="background-color:#2b2c2f;">
<span style="color:#c594c5;">fn </span><span style="color:#6699cc;">main</span><span style="color:#5fb3b3;">() {
</span><span style="color:#cccece;">    </span><span style="color:#cccece;">App</span><span style="color:#5fb3b3;">::</span><span style="color:#cccece;">build</span><span style="color:#5fb3b3;">()
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_plugins</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">DefaultPlugins</span><span style="color:#5fb3b3;">)
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_startup_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">add_people</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">hello_world</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">greet_people</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">run</span><span style="color:#5fb3b3;">();
</span><span style="color:#5fb3b3;">}
</span></pre>
<p>再一次执行<code>cargo run</code>.</p>
<p>你应该注意到两件事:</p>
<ul>
<li><strong>一个弹出的窗口</strong><br />
这是因为我们现在有了窗口插件(
<a href="https:&#x2F;&#x2F;docs.rs/bevy_window&#x2F;latest&#x2F;bevy_window/struct.WindowPlugin.html"><code>WindowPlugin</code>
</a>), 它定义了窗口界面(但实际上并不知道如何制作窗口), 还有
<a href="https:&#x2F;&#x2F;docs.rs/bevy_winit&#x2F;latest&#x2F;bevy_winit/struct.WinitPlugin.html"><code>WinitPlugin</code>
</a>插件, 它使用<a href="https://github.com/rust-windowing/winit">winit 库</a>来使用系统本身的 API 窗口来创建窗口.</li>
<li><strong>你的控制台现在全是<code>hello</code>的消息</strong><br />
这是因为
<a href="https:&#x2F;&#x2F;docs.rs/bevy&#x2F;latest&#x2F;bevy/struct.DefaultPlugins.html"><code>DefaultPlugins</code>
</a>添加了一个<code>event loop(循环事件)</code>到我们的应用. 我们应用的 ESC 调度器在每一帧运行一次. 我们将在稍后解决控制台的垃圾信息.</li>
</ul>
<p>备注: <code>add_plugins(DefaultPlugins)</code>等同于下面这段代码:</p>
<pre style="background-color:#2b2c2f;">
<span style="color:#c594c5;">fn </span><span style="color:#6699cc;">main</span><span style="color:#5fb3b3;">() {
</span><span style="color:#cccece;">    </span><span style="color:#cccece;">App</span><span style="color:#5fb3b3;">::</span><span style="color:#cccece;">build</span><span style="color:#5fb3b3;">()
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_plugin</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">CorePlugin</span><span style="color:#5fb3b3;">::</span><span style="color:#cccece;">default</span><span style="color:#5fb3b3;">())
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_plugin</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">InputPlugin</span><span style="color:#5fb3b3;">::</span><span style="color:#cccece;">default</span><span style="color:#5fb3b3;">())
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_plugin</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">WindowPlugin</span><span style="color:#5fb3b3;">::</span><span style="color:#cccece;">default</span><span style="color:#5fb3b3;">())
</span><span style="color:#cccece;">        </span><span style="color:#5f6364;">/* more plugins omitted for brevity */
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">run</span><span style="color:#5fb3b3;">();
</span><span style="color:#5fb3b3;">}
</span></pre>
<p>你可以自由的使用任何适合你的方法!</p>
<h2 id="chuang-jian-ni-de-di-yi-ge-cha-jian">创建你的第一个插件</h2>
<p>为了更好的管理, 让我们把所有<code>hello</code>逻辑移到一个插件. 想要创建一个插件, 我们只需要实现插件(
<a href="https:&#x2F;&#x2F;docs.rs/bevy_app&#x2F;latest&#x2F;bevy_app/trait.Plugin.html"><code>Plugin</code>
</a>)接口. 将一下代码添加到<code>main.rs</code>文件中:</p>
<pre style="background-color:#2b2c2f;">
<span style="color:#c594c5;">pub struct </span><span style="color:#cccece;">HelloPlugin</span><span style="color:#5fb3b3;">;
</span><span style="color:#cccece;">
</span><span style="color:#c594c5;">impl </span><span style="color:#cccece;">Plugin </span><span style="color:#c594c5;">for </span><span style="color:#cccece;">HelloPlugin </span><span style="color:#5fb3b3;">{
</span><span style="color:#cccece;">    </span><span style="color:#c594c5;">fn </span><span style="color:#6699cc;">build</span><span style="color:#5fb3b3;">(&amp;</span><span style="color:#f99157;">self</span><span style="color:#cccece;">, </span><span style="color:#f99157;">app</span><span style="color:#5fb3b3;">: &amp;</span><span style="color:#c594c5;">mut</span><span style="color:#cccece;"> AppBuilder</span><span style="color:#5fb3b3;">) {
</span><span style="color:#cccece;">        </span><span style="color:#5f6364;">// add things to your app here
</span><span style="color:#cccece;">    </span><span style="color:#5fb3b3;">}
</span><span style="color:#5fb3b3;">}
</span></pre>
<p>然后像这样在 App 中注册插件:</p>
<pre style="background-color:#2b2c2f;">
<span style="color:#c594c5;">fn </span><span style="color:#6699cc;">main</span><span style="color:#5fb3b3;">() {
</span><span style="color:#cccece;">    </span><span style="color:#cccece;">App</span><span style="color:#5fb3b3;">::</span><span style="color:#cccece;">build</span><span style="color:#5fb3b3;">()
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_plugins</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">DefaultPlugins</span><span style="color:#5fb3b3;">)
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_plugin</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">HelloPlugin</span><span style="color:#5fb3b3;">)
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_startup_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">add_people</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">hello_world</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">greet_people</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">run</span><span style="color:#5fb3b3;">();
</span><span style="color:#5fb3b3;">}
</span></pre>
<p>现在只剩下我们把我们的<code>系统</code>移到<code>HelloPlugin</code>中, 这也只是一个复制粘贴的过程. 在我们插件<code>build()</code>函数中的变量<code>app</code>, 和我们在<code>main()</code>函数中使用的构造器类型相同:</p>
<pre style="background-color:#2b2c2f;">
<span style="color:#c594c5;">impl </span><span style="color:#cccece;">Plugin </span><span style="color:#c594c5;">for </span><span style="color:#cccece;">HelloPlugin </span><span style="color:#5fb3b3;">{
</span><span style="color:#cccece;">    </span><span style="color:#c594c5;">fn </span><span style="color:#6699cc;">build</span><span style="color:#5fb3b3;">(&amp;</span><span style="color:#f99157;">self</span><span style="color:#cccece;">, </span><span style="color:#f99157;">app</span><span style="color:#5fb3b3;">: &amp;</span><span style="color:#c594c5;">mut</span><span style="color:#cccece;"> AppBuilder</span><span style="color:#5fb3b3;">) {
</span><span style="color:#cccece;">        </span><span style="color:#cccece;">app</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_startup_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">add_people</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
</span><span style="color:#cccece;">            </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">hello_world</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">())
</span><span style="color:#cccece;">            </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_system</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">greet_people</span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">system</span><span style="color:#5fb3b3;">());
</span><span style="color:#cccece;">    </span><span style="color:#5fb3b3;">}
</span><span style="color:#5fb3b3;">}
</span><span style="color:#cccece;">
</span><span style="color:#c594c5;">fn </span><span style="color:#6699cc;">main</span><span style="color:#5fb3b3;">() {
</span><span style="color:#cccece;">    </span><span style="color:#cccece;">App</span><span style="color:#5fb3b3;">::</span><span style="color:#cccece;">build</span><span style="color:#5fb3b3;">()
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_plugins</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">DefaultPlugins</span><span style="color:#5fb3b3;">)
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">add_plugin</span><span style="color:#5fb3b3;">(</span><span style="color:#cccece;">HelloPlugin</span><span style="color:#5fb3b3;">)
</span><span style="color:#cccece;">        </span><span style="color:#5fb3b3;">.</span><span style="color:#6699cc;">run</span><span style="color:#5fb3b3;">();
</span><span style="color:#5fb3b3;">}
</span></pre>
<p>再尝试运行一次应用. 它能准确的像之前一样工作. 在下一章节中, 我们将用<code>Resources</code>的概念来解决<code>hello</code>垃圾信息的问题.</p>
</div>
    <div class="book-pagers" />
  </div>
</div>

</div>
    </section>
  </body>
</html>
